<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿‘æ³3æŠã‚¯ã‚¤ã‚º</title>

    <!-- â–¼â–¼ PWAã®æœ€å°è¿½è¨˜ï¼ˆã“ã“ã‹ã‚‰ï¼‰ â–¼â–¼ -->
    <link rel="manifest" href="./manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="./icons/icon-192.png">
    <!-- â–²â–² PWAã®æœ€å°è¿½è¨˜ï¼ˆã“ã“ã¾ã§ï¼‰ â–²â–² -->

    <style>
        /* æœ€åˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ v1 ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒ™ãƒ¼ã‚¹ã«èª¿æ•´ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 20px);
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        .section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .section h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        /* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç† */
        .player-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .player-input-group input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            touch-action: manipulation;
            min-height: 44px; /* ã‚¿ãƒƒãƒé ˜åŸŸç¢ºä¿ */
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:active {
            background: #5568d3;
            transform: scale(0.98);
        }

        .btn-danger {
            background: #ff6b6b;
            color: white;
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-danger:active {
            background: #ff5252;
            transform: scale(0.98);
        }

        .btn-success {
            background: #51cf66;
            color: white;
        }

        .btn-success:active {
            background: #40c057;
            transform: scale(0.98);
        }

        .btn-secondary {
            background: #868e96;
            color: white;
        }

        .btn-secondary:active {
            background: #748087;
            transform: scale(0.98);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            min-height: 36px;
        }

        .player-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .player-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }

        .player-item.host {
            border-left-color: #51cf66;
            background: #f0fdf4;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .player-score {
            font-size: 14px;
            color: #666;
        }

        .player-actions {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        /* ãƒ©ã‚¦ãƒ³ãƒ‰ç®¡ç† */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 14px;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 60px;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .timer-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .timer-input-group input {
            width: 80px;
            text-align: center;
        }

        .candidates-section {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .candidate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        /* ã‚²ãƒ¼ãƒ ç”»é¢ */
        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .round-info {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .round-info h3 {
            font-size: 16px;
            margin-bottom: 8px;
            color: #667eea;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .answer-option {
            padding: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            min-height: 80px;
        }

        .answer-option:active {
            transform: scale(0.98);
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
            color: #667eea;
        }

        /* çµæœè¡¨ç¤ºã®è‰²åˆ†ã‘ */
        .answer-option.truth {
            border-color: #51cf66;
            background: #f0fdf4;
            color: #2f7c31;
        }

        .answer-option.authorFake {
            border-color: #ffd43b;
            background: #fffbeb;
            color: #b08200;
        }

        .answer-option.otherFake {
            border-color: #ff922b;
            background: #fff4e6;
            color: #d9480f;
        }

        .answer-text {
            margin-bottom: 8px;
            font-size: 14px;
        }

        .answer-label {
            font-size: 12px;
            opacity: 0.7;
        }
        
        .answer-detail {
            font-size: 13px;
            font-weight: bold;
            margin-top: 5px;
        }


        /* æ¡ç‚¹çµæœ */
        .scoring-rules {
            background: #e6f0ff;
            border: 1px solid #c6d9ff;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .scoring-rules h4 {
            color: #337ab7;
            margin-bottom: 10px;
        }
        .scoring-rules ul {
            list-style-type: none;
            padding-left: 0;
        }
        .scoring-rules li {
            margin-bottom: 5px;
            font-size: 14px;
            line-height: 1.5;
        }

        .scoring-results {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .result-card {
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid;
            position: relative; /* å›ç­”è¡¨ç¤ºç”¨ */
        }

        .result-card.positive {
            border-left-color: #51cf66;
        }

        .result-card.negative {
            border-left-color: #ff6b6b;
        }

        .result-card.neutral {
            border-left-color: #868e96;
        }

        .result-player {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .result-answer-label {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            opacity: 0.8;
        }

        .result-score {
            font-size: 14px;
            font-weight: 600;
            margin-top: 6px;
        }

        .result-score.plus {
            color: #51cf66;
        }

        .result-score.minus {
            color: #ff6b6b;
        }

        .result-score.zero {
            color: #868e96;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid #e0e0e0;
        }

        .footer-text {
            line-height: 1.6;
        }

        /* ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º */
        .step-indicator {
            font-size: 16px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
        }

        /* å›ç­”ãƒ•ã‚§ãƒ¼ã‚ºã®UIèª¿æ•´ */
        #answerSelection {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .answer-status {
            background: #e9ecef;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: 600;
        }

        .consultation-phase {
            text-align: center;
            padding: 20px 0;
        }
        
        /* ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º */
        #timerDisplay {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* æœ€çµ‚çµæœ */
        .final-result-card {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
            text-align: center;
        }
        .final-result-card h3 {
            font-size: 24px;
            color: #667eea;
            margin-bottom: 15px;
        }
        .final-ranking-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #eee;
            font-size: 16px;
        }
        .final-ranking-item:last-child {
            border-bottom: none;
        }
        .rank {
            font-weight: bold;
            font-size: 18px;
            color: #ff922b;
            width: 40px;
        }
        .rank-1 .rank { color: #ffd43b; font-size: 24px; }
        .rank-2 .rank { color: #868e96; font-size: 20px; }
        .rank-3 .rank { color: #d9480f; font-size: 18px; }
        .player-name-final {
            flex-grow: 1;
            text-align: left;
            font-weight: 600;
        }
        .score-final {
            font-weight: bold;
            color: #51cf66;
            width: 80px;
            text-align: right;
        }
        .penalty-final {
            font-size: 12px;
            color: #ff6b6b;
            width: 60px;
            text-align: right;
        }
        
        /* ã‚¹ã‚³ã‚¢é·ç§»ï¼ˆæŠ˜ã‚ŠãŸãŸã¿å¯¾å¿œï¼‰ */
        .score-history {
            margin-top: 8px;
        }
        .score-history summary {
            cursor: pointer;
            font-weight: 700;
            color: #667eea;
            list-style: none;
            outline: none;
            user-select: none;
            margin-bottom: 6px;
        }
        .score-history[open] {
            background: #f0f4ff;
            border-radius: 6px;
            padding: 8px 10px;
        }
        .score-history-item {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 4px;
            padding-bottom: 4px;
            border-bottom: 1px dotted #ccc;
        }
        .score-history-item:last-child {
            border-bottom: none;
        }
        .history-label {
            font-weight: bold;
            color: #667eea;
        }
        .history-value {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>è¿‘æ³3æŠã‚¯ã‚¤ã‚º</h1>
            <p id="headerSubtitle">å‡ºé¡Œè€…: <span id="currentHostName" style="font-weight: bold; color: #ffd43b;">æœªå®š</span></p>
        </header>

        <div class="content">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†ï¼†ã‚¹ã‚³ã‚¢ -->
            <div class="section">
                <h2>å‚åŠ è€…ã¨ã‚¹ã‚³ã‚¢</h2>
                
                <div class="player-input-group">
                    <input type="text" id="playerNameInput" placeholder="ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å" />
                    <button class="btn btn-primary" id="addPlayerButton">è¿½åŠ </button>
                </div>

                <div class="player-list" id="playerList"></div>
            </div>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼šã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼ -->
            <div>
                <!-- ã‚¹ãƒ†ãƒƒãƒ—1: å‡ºé¡Œè€…å…¥åŠ› -->
                <div id="step1" class="screen active">
                    <div class="section">
                        <div class="step-indicator">STEP 1: å‡ºé¡Œè€…å…¥åŠ›</div>
                        
                        <div class="form-group">
                            <label>ãƒ©ã‚¦ãƒ³ãƒ‰å (è‡ªå‹•è¨­å®š)</label>
                            <input type="text" id="roundNameInput" disabled placeholder="[å‡ºé¡Œè€…å]ã®è¿‘æ³å ±å‘Š" />
                        </div>
                        
                        <div class="form-group">
                            <label>ç›¸è«‡æ™‚é–“è¨­å®š (åˆ†)</label>
                            <div class="timer-input-group">
                                <input type="number" id="consultationTimeInput" value="3" min="1" max="60" />
                                <span>åˆ†</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>æ­£è§£ (çœŸå®Ÿ)</label>
                            <textarea id="truthInput" placeholder="å‡ºé¡Œè€…ã®æœ¬å½“ã®è©±"></textarea>
                        </div>

                        <div class="form-group">
                            <label>æœ¬äººãƒ•ã‚§ã‚¤ã‚¯ (å‡ºé¡Œè€…ã®å˜˜)</label>
                            <textarea id="authorFakeInput" placeholder="å‡ºé¡Œè€…ãŒä½œã£ãŸå˜˜ã®è©±"></textarea>
                        </div>

                        <button class="btn btn-success" onclick="saveHostInput()">
                            å…¥åŠ›å®Œäº† & ã¿ã‚“ãªæ¡ˆå…¥åŠ›ã¸
                        </button>
                        <button class="btn btn-danger" onclick="resetGame()" style="margin-top: 10px;">
                            ã‚²ãƒ¼ãƒ å…¨ä½“ã‚’ãƒªã‚»ãƒƒãƒˆ
                        </button>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—2: ã¿ã‚“ãªæ¡ˆå…¥åŠ› -->
                <div id="step2" class="screen">
                    <div class="section">
                        <div class="step-indicator">STEP 2: ã¿ã‚“ãªæ¡ˆå…¥åŠ›</div>
                        <p style="margin-bottom: 15px;">
                            <strong><span id="currentCandidateAuthor"></span></strong> ã•ã‚“ã€ãƒ•ã‚§ã‚¤ã‚¯æ¡ˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
                        </p>

                        <div class="form-group">
                            <label>ãƒ•ã‚§ã‚¤ã‚¯å†…å®¹</label>
                            <textarea id="candidateTextInput" placeholder="ä»–ã®äººã«é¸ã°ã‚Œã‚‹ã‚ˆã†ãªé¢ç™½ã„å˜˜ã‚’è€ƒãˆã¦ã­"></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="submitCandidate()">
                            æ¡ˆã‚’æå‡º
                        </button>
                        
                        <div id="inputStatus" style="margin-top: 20px; font-size: 14px; color: #666;">
                            ä»–ã®äººã®æ¡ˆã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚
                        </div>
                    </div>
                </div>
                
                <!-- ã‚¹ãƒ†ãƒƒãƒ—2.5: ã¿ã‚“ãªæ¡ˆå…¥åŠ›å®Œäº†ç¢ºèª -->
                <div id="step2_5" class="screen">
                    <div class="section">
                        <div class="step-indicator">STEP 2.5: ã¿ã‚“ãªæ¡ˆæå‡ºå®Œäº†</div>
                        <p style="margin-bottom: 15px; font-weight: bold;">
                            å‡ºé¡Œè€…ä»¥å¤–ã®å…¨å“¡ãŒæ¡ˆã‚’æå‡ºã—ã¾ã—ãŸã€‚
                        </p>
                        <p style="margin-bottom: 20px;">
                            å‡ºé¡Œè€… <strong><span id="hostNameStep2_5"></span></strong> ã•ã‚“ã€æº–å‚™ãŒã§ããŸã‚‰æ¡ç”¨ã™ã‚‹æ¡ˆã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
                        </p>
                        <button class="btn btn-success" onclick="goToCandidateSelection()">
                            ã¿ã‚“ãªæ¡ˆã®æ¡ç”¨ã¸
                        </button>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—3: å‡ºé¡Œè€…ã«ã‚ˆã‚‹ã¿ã‚“ãªæ¡ˆæ¡ç”¨ -->
                <div id="step3" class="screen">
                    <div class="section">
                        <div class="step-indicator">STEP 3: ã¿ã‚“ãªæ¡ˆæ¡ç”¨</div>
                        <p style="margin-bottom: 15px;">
                            å‡ºé¡Œè€… <strong><span id="hostNameStep3"></span></strong> ã•ã‚“ã€æ¡ç”¨ã™ã‚‹æ¡ˆã‚’1ã¤é¸ã‚“ã§ãã ã•ã„ã€‚<strong>ä½œè€…åã¯ä¼ã›ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</strong>
                        </p>
                        <div id="candidatesToSelect" class="candidates-section">
                            <div style="font-size: 13px; color: #999;">ã¿ã‚“ãªæ¡ˆãŒã‚ã‚Šã¾ã›ã‚“</div>
                        </div>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—4: å›ç­”ãƒ•ã‚§ãƒ¼ã‚º -->
                <div id="step4" class="screen">
                    <div class="section">
                        <div class="step-indicator">STEP 4: å›ç­”ãƒ•ã‚§ãƒ¼ã‚º</div>
                        <h3 style="margin-bottom: 15px;">ãƒ©ã‚¦ãƒ³ãƒ‰: <span id="roundNameDisplay"></span></h3>
                        
                        <!-- é¸æŠè‚¢ã‚’å…ˆã«è¡¨ç¤º -->
                        <div class="answers-grid" id="answersGrid"></div>
                        
                        <!-- ç›¸è«‡ãƒ•ã‚§ãƒ¼ã‚º -->
                        <div id="consultationPhase" class="consultation-phase">
                            <div id="timerDisplay">03:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-primary" id="timerStartButton" onclick="startTimer()">ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹</button>
                                <button class="btn btn-secondary" id="timerStopButton" onclick="stopTimer()" disabled>ä¸€æ™‚åœæ­¢</button>
                                <button class="btn btn-danger" id="timerResetButton" onclick="resetTimer()">ãƒªã‚»ãƒƒãƒˆ</button>
                            </div>
                            
                            <p style="font-weight: bold; margin-top: 20px; margin-bottom: 15px; color: #667eea;">
                                å…¨å“¡ã§ç›¸è«‡ã—ã€å›ç­”ã‚’æ±ºã‚ã¦ãã ã•ã„ã€‚
                            </p>
                            <button class="btn btn-primary" onclick="startAnswering()">
                                ç›¸è«‡çµ‚äº†ï¼å›ç­”ã‚¿ãƒ¼ãƒ³ã¸
                            </button>
                        </div>

                        <!-- å›ç­”ãƒ•ã‚§ãƒ¼ã‚º -->
                        <div id="answerSelection" style="display: none;">
                            <div class="answer-status">
                                æ¬¡ã«å›ç­”ã™ã‚‹äºº: <strong><span id="currentAnsweringPlayer"></span></strong>
                            </div>
                            <p style="margin-bottom: 10px;">
                                <strong><span id="currentAnsweringPlayerName"></span></strong> ã•ã‚“ã€é¸æŠè‚¢ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å›ç­”ã‚’ç¢ºå®šã—ã¦ãã ã•ã„ã€‚
                            </p>
                            
                            <div style="display: flex; gap: 10px; margin-top: 10px;">
                                <button class="btn btn-primary" onclick="submitAnswer()" id="submitAnswerButton" disabled>
                                    å›ç­”ç¢ºå®š
                                </button>
                                <button class="btn btn-secondary" onclick="skipAnswer()">
                                    ã‚¹ã‚­ãƒƒãƒ— (æœªå›ç­”)
                                </button>
                                <button class="btn btn-danger" onclick="resetAnswerPhase()">
                                    å›ç­”ãƒ•ã‚§ãƒ¼ã‚ºã‚’ãƒªã‚»ãƒƒãƒˆ
                                </button>
                            </div>
                        </div>
                        
                        <!-- å…¨å“¡å›ç­”æ¸ˆã¿å¾Œã®ãƒœã‚¿ãƒ³ -->
                        <div id="allAnsweredControls" style="display: none; margin-top: 20px;">
                            <p style="font-weight: bold; color: #51cf66; margin-bottom: 15px;">
                                å…¨å“¡ãŒå›ç­”ã‚’çµ‚ãˆã¾ã—ãŸã€‚
                            </p>
                            <button class="btn btn-success" onclick="goToResultPhase()">
                                çµæœç™ºè¡¨ã¸
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—5: çµæœç™ºè¡¨ -->
                <div id="step5" class="screen">
                    <div class="section">
                        <div class="step-indicator">STEP 5: çµæœç™ºè¡¨</div>
                        <h3 style="margin-bottom: 15px;">ãƒ©ã‚¦ãƒ³ãƒ‰: <span id="roundNameResult"></span></h3>

                        <button class="btn btn-primary" onclick="revealAnswer()" id="revealButton">
                            æ­£è§£ã‚’å…¬é–‹ã—ã¦æ¡ç‚¹
                        </button>
                        
                        <div id="resultContent" style="margin-top: 20px; display: none;">
                            
                            <h4 style="margin-bottom: 10px; color: #667eea;">æ¡ç‚¹ãƒ«ãƒ¼ãƒ«</h4>
                            <div class="scoring-rules">
                                <ul>
                                    <li><strong>æ­£è§£ã‚’é¸ã‚“ã äººï¼š</strong> +1pt</li>
                                    <li><strong>å‡ºé¡Œè€…ãƒ•ã‚§ã‚¤ã‚¯ã‚’é¸ã‚“ã äººï¼š</strong> Â±0pt (æ¸›ç‚¹ãªã—)</li>
                                    <li><strong>ä»–è€…ãƒ•ã‚§ã‚¤ã‚¯ã‚’é¸ã‚“ã äººï¼š</strong> -1pt</li>
                                    <li><strong>å‡ºé¡Œè€…ã¸ã®ãƒœãƒ¼ãƒŠã‚¹ï¼š</strong> æœ¬äººãƒ•ã‚§ã‚¤ã‚¯ã‚’é¸ã‚“ã äººæ•° Ã— +1pt</li>
                                    <li><strong>ãƒ•ã‚§ã‚¤ã‚¯ä½œæˆè€…ã¸ã®ãƒœãƒ¼ãƒŠã‚¹ï¼š</strong> ä»–è€…ãƒ•ã‚§ã‚¤ã‚¯ã‚’é¸ã‚“ã äººæ•° Ã— +1pt</li>
                                </ul>
                            </div>

                            <h4 style="margin-top: 20px; margin-bottom: 10px; color: #667eea;">é¸æŠè‚¢ã®æ­£ä½“</h4>
                            <div class="answers-grid" id="finalAnswersGrid"></div>

                            <h4 style="margin-top: 20px; margin-bottom: 10px; color: #667eea;">æ¡ç‚¹çµæœ</h4>
                            <div class="scoring-results" id="scoringResults"></div>

                            <div style="display: flex; gap: 10px; margin-top: 20px;">
                                <button class="btn btn-success" onclick="nextRound()">æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã¸</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ã‚¹ãƒ†ãƒƒãƒ—6: æœ€çµ‚çµæœ -->
                <div id="step6" class="screen">
                    <div class="section">
                        <div class="step-indicator">GAME OVER: æœ€çµ‚çµæœ</div>
                        <div class="final-result-card">
                            <h3>å…¨ãƒ©ã‚¦ãƒ³ãƒ‰çµ‚äº†ï¼æœ€çµ‚çµæœç™ºè¡¨ï¼</h3>
                            <p style="font-size: 12px; color: #666; margin-bottom: 15px;">â€»åŒç‚¹ã®å ´åˆã€ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼ˆãƒã‚¤ãƒŠã‚¹ç‚¹ï¼‰ãŒå°‘ãªã„æ–¹ãŒä¸Šä½ã§ã™ã€‚</p>
                            <div id="finalRankingList"></div>
                            <button class="btn btn-danger" onclick="resetGame()" style="margin-top: 20px;">
                                ã‚²ãƒ¼ãƒ å…¨ä½“ã‚’ãƒªã‚»ãƒƒãƒˆ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-text">
                <p>ğŸ­ æœ€ä¸‹ä½ã¯é¡”ãƒãƒ¡ãƒ‘ãƒãƒ«ã®å„€ ğŸ­</p>
            </div>
        </footer>
    </div>

    <script>
        // =====================
        // ãƒ‡ãƒ¼ã‚¿ç®¡ç†
        // =====================
        const PLAYERS_KEY = 'quizAppPlayersV11';
        const HOST_INDEX_KEY = 'quizAppHostIndexV11';
        const ROUND_D_

